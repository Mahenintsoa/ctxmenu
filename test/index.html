<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            font-family: sans-serif;
        }

        html,
        body {
            height: 100%;
        }
    </style>
    <meta charset="utf8" />
    <script>
        document.addEventListener("readystatechange", function (event) {
            if (document.readyState === "complete") {

                ContextMenu.attach("html", [
                    {
                        text: "Actions",
                        tooltip: "JS Functions"
                    },
                    {
                        action: function () { alert("Clicked action item") },
                        text: "click me"
                    },
                    { isDivider: true },
                    {
                        text: "Anchors",
                        tooltip: "links (<a>)"
                    },
                    {
                        href: "http://www.google.de",
                        text: "Google"
                    },
                    {
                        href: "http://www.google.de",
                        target: "_blank",
                        text: "Google (neuer Tab)",
                        tooltip: "Ã–ffnet in neuem Tab"
                    },
                    { isDivider: true },
                    {
                        text: "Menuception"
                    },
                    {
                        text: "more ...",
                        subMenu: [
                            {
                                text: "even more...",
                                subMenu: [
                                    {
                                        text: "there's nothing here...",
                                        action: undefined,
                                        disabled: true
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        text: "even more actions",
                        subMenu: [
                            {
                                text: "more",
                                subMenu: menuception("what's this? deeper and deeper into the rabbit hole ... will it ever end? nobody knows ........ ....... it is still going .... man, this is a deeply nested menu .... almost there .... I\u2800promise ... You did it ...".split(" "))
                            }
                        ]
                    },
                    { isDivider: true }
                ], function (m, e) {
                    m.push({
                        text: "Coordinates: x" + e.offsetX + " y" + e.offsetY
                    });
                    return m;
                });

                function menuception(array) {
                    if (array.length === 0) return [];

                    return [{
                        text: array.shift(),
                        subMenu: menuception(array)
                    }];
                }

                ContextMenu.attach("h1", [
                    {
                        action: function () { alert("Clicked h1") },
                        text: "Heading"
                    },
                    {
                        action: function () { alert("Clicked h1") },
                        text: "Heading disabled",
                        disabled: true
                    }
                ]);
                //Should produce error because it already exists
                ContextMenu.attach("h1", []);
                //Should produce error because selector returns nothing
                ContextMenu.attach(".thisClassDoesNotExist", []);
                //Should silently add the not yet existing context menu.
                ContextMenu.update("p", []);
            }
        });
    </script>
    <script src="../lib/ctxMenu.js"></script>
</head>

<body>
    <h1 style="margin: auto;">ctxMenu.js</h1>
    <p>Lorem ipsum</p>
</body>

</html>