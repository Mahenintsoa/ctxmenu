"use strict";/*! ctxMenu v0.1 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var ContextMenu=function(){function a(){var b=this;_classCallCheck(this,a),this.cache={},window.addEventListener("click",function(){return b.closeMenu()}),window.addEventListener("resize",function(){return b.closeMenu()}),window.addEventListener("scroll",function(){return b.closeMenu()})}return a.prototype.attach=function(b,c){var d=this,f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(a){return a},g=document.querySelector(b);if(void 0!==this.cache[b])return void console.error("target element "+b+" already has a context menu assigned. Use ContextMenu.update() intstead.");if(!g)return void console.error("target element "+b+" not found");var e=function(b){b.stopImmediatePropagation(),d.closeMenu();var e=f([].concat(c),b);d.menu=a.generateDOM(b,e),document.body.appendChild(d.menu),b.preventDefault()};this.cache[b]={ctxmenu:c,handler:e},g.addEventListener("contextmenu",e)},a.prototype.update=function(a,b){var c=this.cache[a],d=document.querySelector(a);d&&d.removeEventListener("contextmenu",c&&c.handler),delete this.cache[a],this.attach(a,b)},a.prototype.delete=function(a){var b=this.cache[a];if(!b)return void console.error("no context menu for target element "+a+" found");var c=document.querySelector(a);return c?void(c.removeEventListener("contextmenu",b.handler),delete this.cache[a]):void console.error("target element "+a+" does not exist (anymore)")},a.prototype.closeMenu=function(){if(this.menu){var a=this.menu.parentElement;a&&a.removeChild(this.menu),delete this.menu}},a.generateDOM=function(a,b){var c=this,d=document.createElement("ul");return 0===b.length&&(d.style.display="none"),b.forEach(function(a){var b=document.createElement("li");c.itemIsDivider(a)?b.className="divider":(b.innerHTML="<span>"+a.text+"</span>",b.title=a.tooltip||"",a.disabled?b.className="disabled":c.itemIsAction(a)?(b.addEventListener("click",function(){return a.action()}),b.className="interactive"):c.itemIsAnchor(a)?(b.innerHTML="<a href=\""+a.href+"\" target=\""+(a.target||"")+"\">"+a.text+"</a>",b.className="interactive"):(b.style.fontWeight="bold",b.style.marginLeft="-5px")),d.appendChild(b)}),d.style.position="fixed",d.style.left=a.offsetX+"px",d.style.top=a.offsetY+"px",d.className="ctxmenu",d},a.itemIsAction=function(a){return a.hasOwnProperty("action")},a.itemIsAnchor=function(a){return a.hasOwnProperty("href")},a.itemIsDivider=function(a){return a.hasOwnProperty("isDivider")},a}();window.ContextMenu=new ContextMenu,document.addEventListener("readystatechange",function(){if("interactive"===document.readyState){var a=document.createElement("style");a.innerHTML=".ctxmenu{border:1px solid #999;padding:2px 0;box-shadow:3px 3px 3px #aaa;background:#fff}.ctxmenu li{margin:1px 0;display:block}.ctxmenu li *{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,0.1)}",document.head.insertBefore(a,document.head.childNodes[0])}});
